<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="it">
<head>
<!-- Generated by javadoc (14.0.1) on Tue Jun 30 23:37:35 CEST 2020 -->
<title>Controller</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2020-06-30">
<meta name="description" content="declaration: package: it.polimi.ingsw.controller, class: Controller">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">it.polimi.ingsw.controller</a></div>
<h1 title="Class Controller" class="title">Class Controller</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">it.polimi.ingsw.controller.Controller</div>
</div>
<section class="description">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../observer/Observer.html" title="interface in it.polimi.ingsw.observer">Observer</a>&lt;<a href="../model/messageModel/Message.html" title="class in it.polimi.ingsw.model.messageModel">Message</a>&gt;</code></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="GodCardController.html" title="class in it.polimi.ingsw.controller">GodCardController</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">Controller</span>
extends java.lang.Object
implements <a href="../observer/Observer.html" title="interface in it.polimi.ingsw.observer">Observer</a>&lt;<a href="../model/messageModel/Message.html" title="class in it.polimi.ingsw.model.messageModel">Message</a>&gt;</pre>
<div class="block">This is the main Controller class. It defines some abstract methods used by subclasses and implements common methods</div>
</section>
<section class="summary">
<ul class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
<!--   -->
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.Map&lt;<a href="../model/Player.html" title="class in it.polimi.ingsw.model">Player</a>,&#8203;<a href="../server/ClientConnection.html" title="class in it.polimi.ingsw.server">ClientConnection</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#activeClients">activeClients</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#answers">answers</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.ArrayList&lt;<a href="../server/ClientConnection.html" title="class in it.polimi.ingsw.server">ClientConnection</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clientConnections">clientConnections</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#counter">counter</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../model/Model.html" title="class in it.polimi.ingsw.model">Model</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#model">model</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.ArrayList&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#playersName">playersName</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(it.polimi.ingsw.model.Model)">Controller</a></span>&#8203;(<a href="../model/Model.html" title="class in it.polimi.ingsw.model">Model</a>&nbsp;model)</code></th>
<td class="colLast">
<div class="block">Class constructor</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#build(it.polimi.ingsw.model.messageModel.PlayerBuild)">build</a></span>&#8203;(<a href="../model/messageModel/PlayerBuild.html" title="class in it.polimi.ingsw.model.messageModel">PlayerBuild</a>&nbsp;playerBuild)</code></th>
<td class="colLast">
<div class="block">This method receives a build action

 At first it checks if the player who sent the message is the turn's player
 Then it uses the checkBuilt function to check if the player can built there, otherwise it throws a new IllegalArgumentException
 If it is possible, it updates the model setting the next phase, the next turn and the next message
 The increase level function is then called

 At last it checks if anyone won/lost</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#canMove(it.polimi.ingsw.model.Worker,it.polimi.ingsw.model.Player)">canMove</a></span>&#8203;(<a href="../model/Worker.html" title="class in it.polimi.ingsw.model">Worker</a>&nbsp;worker,
<a href="../model/Player.html" title="class in it.polimi.ingsw.model">Player</a>&nbsp;player)</code></th>
<td class="colLast">
<div class="block">This method checks if a given worker can move
 For each cell around the worker it checks:
  - If the cell is free
  - If the cell is not the same one where the worker is
  - If the difference between the actual cell level and the next one is at most one
  - If the cell's level is less than 4 (meaning there is not a dome in that cell)
  If every test has been passed, a counter is incremented</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkBuild(it.polimi.ingsw.model.Cell,it.polimi.ingsw.model.messageModel.PlayerBuild)">checkBuild</a></span>&#8203;(<a href="../model/Cell.html" title="class in it.polimi.ingsw.model">Cell</a>&nbsp;buildingCell,
<a href="../model/messageModel/PlayerBuild.html" title="class in it.polimi.ingsw.model.messageModel">PlayerBuild</a>&nbsp;playerBuild)</code></th>
<td class="colLast">
<div class="block">It checks if the given building action can be performed.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkCell(int,int,it.polimi.ingsw.model.Worker,int)">checkCell</a></span>&#8203;(int&nbsp;x,
int&nbsp;y,
<a href="../model/Worker.html" title="class in it.polimi.ingsw.model">Worker</a>&nbsp;actualWorker,
int&nbsp;maxUpDifference)</code></th>
<td class="colLast">
<div class="block">Default checker for a move</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>protected java.util.HashMap&lt;<a href="../model/Cell.html" title="class in it.polimi.ingsw.model">Cell</a>,&#8203;java.lang.Boolean&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkCellsAround(it.polimi.ingsw.model.Worker)">checkCellsAround</a></span>&#8203;(<a href="../model/Worker.html" title="class in it.polimi.ingsw.model">Worker</a>&nbsp;actualWorker)</code></th>
<td class="colLast">
<div class="block">This method is used to determine in which cells the worker can move, associating every cell around the worker to a boolean value

 This method checks every cell around the worker, then using the checkCell function it associates a cell to the returned boolean
 The IllegalArgumentException is caught for the perimeter cells</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#checkVictory()">checkVictory</a></span>()</code></th>
<td class="colLast">
<div class="block">This method checks if any player has won
 This method uses the function canMove to decide whether a worker is able to move or not
 If any player's workers can't move, it calls the model's loose method, giving it the player who looses as parameter</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#endGame(it.polimi.ingsw.model.messageModel.NewGameMessage)">endGame</a></span>&#8203;(<a href="../model/messageModel/NewGameMessage.html" title="class in it.polimi.ingsw.model.messageModel">NewGameMessage</a>&nbsp;newGameMessage)</code></th>
<td class="colLast">
<div class="block">This method is called when the game is over
 When the number of received answers is equal to the number of players in the game it:
  CLEARS THE MODEL: it happens only if every player answered 'yes', then the model is cleared and a new game starts
  SENDS A MESSAGE TO THE SERVER: when the last player has answered and the number of 'yes' are less than
                       the number of players in the game, a EndGameServerMessage is sent to the server, containing the following information:
                       -  The name of the previous lobby, to create a new one using the old name</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code><a href="../model/Model.html" title="class in it.polimi.ingsw.model">Model</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getModel()">getModel</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#increaseLevel(int,it.polimi.ingsw.model.Cell)">increaseLevel</a></span>&#8203;(int&nbsp;blockId,
<a href="../model/Cell.html" title="class in it.polimi.ingsw.model">Cell</a>&nbsp;buildingCell)</code></th>
<td class="colLast">
<div class="block">This function updates the model giving it a new cell level</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#move(it.polimi.ingsw.model.messageModel.PlayerMove)">move</a></span>&#8203;(<a href="../model/messageModel/PlayerMove.html" title="class in it.polimi.ingsw.model.messageModel">PlayerMove</a>&nbsp;move)</code></th>
<td class="colLast">
<div class="block">This method receives a move action

 At first it checks if the player who has sent the message is turn's player
 Then:
      - it checks if the selected worker can move, calling the canMove method
      - it checks if the selected cell is in the map returned by the checkCellAround function, meaning you can move there
 If every test is positive, it sets the next model's phase to BUILD, it updates the messages, and updates the turn
 It then updates the model using the new board and notifies the clients
 At the end, it checks if anyone won
 If an error is caught, it is sent to the client which generated it</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setPlayerWorker(it.polimi.ingsw.model.messageModel.PlayerWorker)">setPlayerWorker</a></span>&#8203;(<a href="../model/messageModel/PlayerWorker.html" title="class in it.polimi.ingsw.model.messageModel">PlayerWorker</a>&nbsp;playerWorker)</code></th>
<td class="colLast">
<div class="block">This method receives a the information to place a worker on the board.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#turnCheck(it.polimi.ingsw.model.messageModel.Message)">turnCheck</a></span>&#8203;(<a href="../model/messageModel/Message.html" title="class in it.polimi.ingsw.model.messageModel">Message</a>&nbsp;message)</code></th>
<td class="colLast">
<div class="block">This function checks if the player who tried to do anything is actually allowed to,
  by checking if it's its turn</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#update(it.polimi.ingsw.model.messageModel.Message)">update</a></span>&#8203;(<a href="../model/messageModel/Message.html" title="class in it.polimi.ingsw.model.messageModel">Message</a>&nbsp;msg)</code></th>
<td class="colLast">
<div class="block">This method receives updates from a Observable class</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
<!--   -->
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="model">model</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType"><a href="../model/Model.html" title="class in it.polimi.ingsw.model">Model</a></span>&nbsp;<span class="memberName">model</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="playersName">playersName</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType">java.util.ArrayList&lt;java.lang.String&gt;</span>&nbsp;<span class="memberName">playersName</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="clientConnections">clientConnections</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType">java.util.ArrayList&lt;<a href="../server/ClientConnection.html" title="class in it.polimi.ingsw.server">ClientConnection</a>&gt;</span>&nbsp;<span class="memberName">clientConnections</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="counter">counter</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">counter</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="answers">answers</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">answers</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="activeClients">activeClients</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType">java.util.Map&lt;<a href="../model/Player.html" title="class in it.polimi.ingsw.model">Player</a>,&#8203;<a href="../server/ClientConnection.html" title="class in it.polimi.ingsw.server">ClientConnection</a>&gt;</span>&nbsp;<span class="memberName">activeClients</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(it.polimi.ingsw.model.Model)">Controller</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">Controller</span>&#8203;(<span class="arguments"><a href="../model/Model.html" title="class in it.polimi.ingsw.model">Model</a>&nbsp;model)</span></div>
<div class="block">Class constructor</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>model</code> - isd the model instance generated for the game</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="getModel()">getModel</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../model/Model.html" title="class in it.polimi.ingsw.model">Model</a></span>&nbsp;<span class="memberName">getModel</span>()</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the game model</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="turnCheck(it.polimi.ingsw.model.messageModel.Message)">turnCheck</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">turnCheck</span>&#8203;(<span class="arguments"><a href="../model/messageModel/Message.html" title="class in it.polimi.ingsw.model.messageModel">Message</a>&nbsp;message)</span></div>
<div class="block">This function checks if the player who tried to do anything is actually allowed to,
  by checking if it's its turn</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>message</code> - is the message received from the view</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if now it's the given player's turn</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="checkCell(int,int,it.polimi.ingsw.model.Worker,int)">checkCell</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">checkCell</span>&#8203;(<span class="arguments">int&nbsp;x,
int&nbsp;y,
<a href="../model/Worker.html" title="class in it.polimi.ingsw.model">Worker</a>&nbsp;actualWorker,
int&nbsp;maxUpDifference)</span>
                  throws <span class="exceptions">java.lang.IllegalArgumentException</span></div>
<div class="block">Default checker for a move</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>x</code> - is the x value of the cell</dd>
<dd><code>y</code> - is the y value of the cell</dd>
<dd><code>actualWorker</code> - is the worker which is performing the move</dd>
<dd><code>maxUpDifference</code> - represents the higher gap the worker can move upward. Is usually is set to 1, but this value can be changed by some god's powers.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the player can perform the desired move</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - if the cell values (x and y) are not between 0 and 4</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="increaseLevel(int,it.polimi.ingsw.model.Cell)">increaseLevel</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">increaseLevel</span>&#8203;(<span class="arguments">int&nbsp;blockId,
<a href="../model/Cell.html" title="class in it.polimi.ingsw.model">Cell</a>&nbsp;buildingCell)</span></div>
<div class="block">This function updates the model giving it a new cell level</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>blockId</code> - is the integer id representing the Blocks enum instance</dd>
<dd><code>buildingCell</code> - the cell which level needs to be increased</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="checkBuild(it.polimi.ingsw.model.Cell,it.polimi.ingsw.model.messageModel.PlayerBuild)">checkBuild</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">checkBuild</span>&#8203;(<span class="arguments"><a href="../model/Cell.html" title="class in it.polimi.ingsw.model">Cell</a>&nbsp;buildingCell,
<a href="../model/messageModel/PlayerBuild.html" title="class in it.polimi.ingsw.model.messageModel">PlayerBuild</a>&nbsp;playerBuild)</span></div>
<div class="block">It checks if the given building action can be performed.
 It checks:
  1) if the given cell is next to the worker
  2) if it is not the cell where the player's worker is
  3) if the cell's coordinates are within the board range
  4) if the cell's level is not greater than level 3 (it can build the last level = DOME)
  5) if the cell is free</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>buildingCell</code> - is the cell where the player wants to build</dd>
<dd><code>playerBuild</code> - The Message subclass containing the information for this action</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the player could build in the given cell</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="checkVictory()">checkVictory</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">checkVictory</span>()</div>
<div class="block">This method checks if any player has won
 This method uses the function canMove to decide whether a worker is able to move or not
 If any player's workers can't move, it calls the model's loose method, giving it the player who looses as parameter</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="endGame(it.polimi.ingsw.model.messageModel.NewGameMessage)">endGame</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">endGame</span>&#8203;(<span class="arguments"><a href="../model/messageModel/NewGameMessage.html" title="class in it.polimi.ingsw.model.messageModel">NewGameMessage</a>&nbsp;newGameMessage)</span></div>
<div class="block">This method is called when the game is over
 When the number of received answers is equal to the number of players in the game it:
  CLEARS THE MODEL: it happens only if every player answered 'yes', then the model is cleared and a new game starts
  SENDS A MESSAGE TO THE SERVER: when the last player has answered and the number of 'yes' are less than
                       the number of players in the game, a EndGameServerMessage is sent to the server, containing the following information:
                       -  The name of the previous lobby, to create a new one using the old name.
                       -  The name of the last player which answered 'yes' (and he becomes the new first player of the game)
                       -  The name of the second player (if it exists) who answered yes
                       -  The instance of ClientSocketConnection of every player
                       -  The actual game mode (hard or simple)
 CLOSES THE CONNECTION of every players who answered 'no'</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newGameMessage</code> - contains the player's reply after the following question has been given: "Would you like to play again?"</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="canMove(it.polimi.ingsw.model.Worker,it.polimi.ingsw.model.Player)">canMove</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">canMove</span>&#8203;(<span class="arguments"><a href="../model/Worker.html" title="class in it.polimi.ingsw.model">Worker</a>&nbsp;worker,
<a href="../model/Player.html" title="class in it.polimi.ingsw.model">Player</a>&nbsp;player)</span></div>
<div class="block">This method checks if a given worker can move
 For each cell around the worker it checks:
  - If the cell is free
  - If the cell is not the same one where the worker is
  - If the difference between the actual cell level and the next one is at most one
  - If the cell's level is less than 4 (meaning there is not a dome in that cell)
  If every test has been passed, a counter is incremented</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>worker</code> - is the player's worker which needs to be moved</dd>
<dd><code>player</code> - is the player who is trying to move</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of cells which have passed the tests</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setPlayerWorker(it.polimi.ingsw.model.messageModel.PlayerWorker)">setPlayerWorker</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setPlayerWorker</span>&#8203;(<span class="arguments"><a href="../model/messageModel/PlayerWorker.html" title="class in it.polimi.ingsw.model.messageModel">PlayerWorker</a>&nbsp;playerWorker)</span></div>
<div class="block">This method receives a the information to place a worker on the board.

 At first it checks if the player who has sent the message is the actual turn's player
 If he is, the worker is placed on the board using the model's setWorker function
 Then:
      - If the phase is SETWORKER1 then it changes the model phase to SETWORKER2 but it doesn't change the turn
      - If the phase is SETWORKER2 we can have 2 different alternatives:
                     - If the player wasn't the only one who didn't place the worker, then this method updates the turn and sets the phase to SETWORKER1 again
                     - Otherwise it updates the turn and sets model's phase to MOVE

 If an error has been caught, it is sent only to che client which has generated it√π</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>playerWorker</code> - the Message subclass containing the information about the player and the cell chosen for the worker to be placed</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="move(it.polimi.ingsw.model.messageModel.PlayerMove)">move</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">move</span>&#8203;(<span class="arguments"><a href="../model/messageModel/PlayerMove.html" title="class in it.polimi.ingsw.model.messageModel">PlayerMove</a>&nbsp;move)</span></div>
<div class="block">This method receives a move action

 At first it checks if the player who has sent the message is turn's player
 Then:
      - it checks if the selected worker can move, calling the canMove method
      - it checks if the selected cell is in the map returned by the checkCellAround function, meaning you can move there
 If every test is positive, it sets the next model's phase to BUILD, it updates the messages, and updates the turn
 It then updates the model using the new board and notifies the clients
 At the end, it checks if anyone won
 If an error is caught, it is sent to the client which generated it</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>move</code> - is the Message subclass containing every information needed</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="build(it.polimi.ingsw.model.messageModel.PlayerBuild)">build</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">build</span>&#8203;(<span class="arguments"><a href="../model/messageModel/PlayerBuild.html" title="class in it.polimi.ingsw.model.messageModel">PlayerBuild</a>&nbsp;playerBuild)</span>
           throws <span class="exceptions">java.lang.IllegalArgumentException</span></div>
<div class="block">This method receives a build action

 At first it checks if the player who sent the message is the turn's player
 Then it uses the checkBuilt function to check if the player can built there, otherwise it throws a new IllegalArgumentException
 If it is possible, it updates the model setting the next phase, the next turn and the next message
 The increase level function is then called

 At last it checks if anyone won/lost</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>playerBuild</code> - is the Message subclass containing the every information needed</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - if the player can't built in the selected cell</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="checkCellsAround(it.polimi.ingsw.model.Worker)">checkCellsAround</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">java.util.HashMap&lt;<a href="../model/Cell.html" title="class in it.polimi.ingsw.model">Cell</a>,&#8203;java.lang.Boolean&gt;</span>&nbsp;<span class="memberName">checkCellsAround</span>&#8203;(<span class="arguments"><a href="../model/Worker.html" title="class in it.polimi.ingsw.model">Worker</a>&nbsp;actualWorker)</span></div>
<div class="block">This method is used to determine in which cells the worker can move, associating every cell around the worker to a boolean value

 This method checks every cell around the worker, then using the checkCell function it associates a cell to the returned boolean
 The IllegalArgumentException is caught for the perimeter cells</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>actualWorker</code> - is the worker who wants to move</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a map containing the board cell as key and a boolean representing whether cell is available for the move or not</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="update(it.polimi.ingsw.model.messageModel.Message)">update</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">update</span>&#8203;(<span class="arguments"><a href="../model/messageModel/Message.html" title="class in it.polimi.ingsw.model.messageModel">Message</a>&nbsp;msg)</span></div>
<div class="block">This method receives updates from a Observable class</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../observer/Observer.html#update(T)">update</a></code>&nbsp;in interface&nbsp;<code><a href="../observer/Observer.html" title="interface in it.polimi.ingsw.observer">Observer</a>&lt;<a href="../model/messageModel/Message.html" title="class in it.polimi.ingsw.model.messageModel">Message</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msg</code> - is the message sent</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</div>
</div>
</body>
</html>
